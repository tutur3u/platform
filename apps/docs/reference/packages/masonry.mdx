---
title: '@tuturuuu/masonry'
description: 'A lightweight, responsive masonry grid component for React applications'
---

## Overview

The `@tuturuuu/masonry` package provides a Pinterest-style masonry grid layout component for React. It uses a "shortest column" algorithm to ensure balanced distribution of items across columns, resulting in a visually appealing layout regardless of item heights.

## Installation

<CodeGroup>

```bash npm
npm install @tuturuuu/masonry
```

```bash yarn
yarn add @tuturuuu/masonry
```

```bash pnpm
pnpm add @tuturuuu/masonry
```

```bash bun
bun add @tuturuuu/masonry
```

</CodeGroup>

## Features

- üé® **Pinterest-style Layout**: Creates beautiful masonry grids with balanced columns
- üì± **Responsive Design**: Automatically adjusts columns based on viewport width
- ‚öñÔ∏è **Smart Distribution**: Uses "shortest column" algorithm for optimal balance
- üéØ **TypeScript Support**: Fully typed with TypeScript
- ‚ö° **Lightweight**: Zero external dependencies besides React
- üîß **Customizable**: Flexible column, gap, and breakpoint configuration

## Basic Usage

```tsx
import { Masonry } from '@tuturuuu/masonry';

export function Gallery() {
  return (
    <Masonry columns={3} gap={16}>
      <div>Item 1</div>
      <div>Item 2</div>
      <div>Item 3</div>
      <div>Item 4</div>
    </Masonry>
  );
}
```

## API Reference

### Props

<ResponseField name="children" type="ReactNode[]" required>
  Array of React elements to display in the masonry grid. Each child will be distributed across columns using the shortest-column algorithm.
</ResponseField>

<ResponseField name="columns" type="number" default={3}>
  Default number of columns to display. This will be overridden by breakpoint configurations if the viewport matches a defined breakpoint.
</ResponseField>

<ResponseField name="gap" type="number" default={16}>
  Gap between items in pixels. This applies both horizontally (between columns) and vertically (between items within a column).
</ResponseField>

<ResponseField name="breakpoints" type="object" default={{ 640: 1, 768: 2, 1024: 3, 1280: 4 }}>
  Responsive breakpoint configuration. Keys are viewport widths in pixels, values are the number of columns to display at or above that width.
  
  Default breakpoints:
  - `640px`: 1 column (mobile)
  - `768px`: 2 columns (tablet)
  - `1024px`: 3 columns (desktop)
  - `1280px`: 4 columns (large desktop)
</ResponseField>

<ResponseField name="className" type="string" default="">
  Additional CSS classes to apply to the masonry container element.
</ResponseField>

## Examples

### Image Gallery

```tsx
import { Masonry } from '@tuturuuu/masonry';

interface Image {
  id: number;
  url: string;
  title: string;
}

export function ImageGallery({ images }: { images: Image[] }) {
  return (
    <Masonry
      columns={4}
      gap={12}
      breakpoints={{
        640: 1,
        768: 2,
        1024: 3,
        1280: 4,
      }}
    >
      {images.map((image) => (
        <div key={image.id} className="overflow-hidden rounded-lg">
          <img
            src={image.url}
            alt={image.title}
            className="h-auto w-full"
          />
        </div>
      ))}
    </Masonry>
  );
}
```

### Card Grid

```tsx
import { Masonry } from '@tuturuuu/masonry';

interface CardProps {
  title: string;
  description: string;
  image?: string;
}

export function CardGrid({ cards }: { cards: CardProps[] }) {
  return (
    <Masonry columns={3} gap={20} className="my-8">
      {cards.map((card, index) => (
        <div
          key={index}
          className="rounded-lg bg-white p-6 shadow-lg dark:bg-gray-800"
        >
          {card.image && (
            <img
              src={card.image}
              alt={card.title}
              className="mb-4 h-auto w-full rounded"
            />
          )}
          <h3 className="mb-2 text-xl font-bold">{card.title}</h3>
          <p className="text-gray-600 dark:text-gray-300">
            {card.description}
          </p>
        </div>
      ))}
    </Masonry>
  );
}
```

### Custom Breakpoints

```tsx
import { Masonry } from '@tuturuuu/masonry';

export function CustomBreakpointGallery() {
  return (
    <Masonry
      columns={5}
      gap={24}
      breakpoints={{
        480: 1,    // Extra small screens
        768: 2,    // Small screens
        1024: 3,   // Medium screens
        1440: 4,   // Large screens
        1920: 5,   // Extra large screens
      }}
    >
      {items.map((item) => (
        <div key={item.id}>{item.content}</div>
      ))}
    </Masonry>
  );
}
```

### Without Breakpoints

To use a fixed number of columns regardless of viewport width, pass an empty breakpoints object:

```tsx
import { Masonry } from '@tuturuuu/masonry';

export function FixedColumnGrid() {
  return (
    <Masonry columns={4} gap={16} breakpoints={{}}>
      {items.map((item) => (
        <div key={item.id}>{item.content}</div>
      ))}
    </Masonry>
  );
}
```

## How It Works

The masonry component uses a **"shortest column" algorithm** to distribute items:

1. Creates the specified number of columns
2. Iterates through all items sequentially
3. Places each item in the column that currently has the fewest items
4. Results in balanced column heights throughout the grid

This approach ensures that columns remain balanced even when items have varying heights, preventing the situation where some columns become much taller than others.

### Why Not Round-Robin?

A simple round-robin distribution (item 1 ‚Üí column 1, item 2 ‚Üí column 2, etc.) can lead to unbalanced layouts when items have different heights. The shortest-column algorithm dynamically adjusts placement to maintain visual balance.

## Styling

The component uses inline styles for core layout functionality and accepts a `className` prop for custom styling:

```tsx
<Masonry
  columns={3}
  gap={16}
  className="mx-auto max-w-7xl px-4"
>
  {items.map((item) => (
    <div
      key={item.id}
      className="rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 p-4"
    >
      {item.content}
    </div>
  ))}
</Masonry>
```

## Best Practices

<AccordionGroup>
  <Accordion title="Use consistent item widths">
    For best results, ensure all items have the same width. The masonry layout handles varying heights automatically, but varying widths can break the grid.
  </Accordion>

  <Accordion title="Set appropriate gap values">
    Choose gap values that match your design system. Common values are 8px, 12px, 16px, or 24px.
  </Accordion>

  <Accordion title="Configure breakpoints thoughtfully">
    Consider your content and screen sizes. More columns work well for small items (like thumbnails), while fewer columns suit larger content cards.
  </Accordion>

  <Accordion title="Use keys properly">
    Always provide unique `key` props to direct children of Masonry to ensure proper React reconciliation.
  </Accordion>

  <Accordion title="Optimize images">
    For image galleries, use appropriately sized images and consider lazy loading for better performance.
  </Accordion>
</AccordionGroup>

## Performance Considerations

- The component uses React state and effects efficiently
- Resize events are properly debounced through React's rendering cycle
- No DOM measurements are performed during rendering
- Minimal re-renders when breakpoints change

## TypeScript

The package is written in TypeScript and exports all necessary types:

```tsx
import { Masonry } from '@tuturuuu/masonry';
import type { ReactNode } from 'react';

interface MasonryProps {
  children: ReactNode[];
  columns?: number;
  gap?: number;
  breakpoints?: {
    [key: number]: number;
  };
  className?: string;
}
```

## Accessibility

The masonry component renders semantic HTML and preserves the DOM order of items. Screen readers will encounter items in the order they appear in the `children` array, not in their visual column order.

For improved accessibility:
- Ensure items have proper semantic markup
- Use ARIA labels where appropriate
- Maintain logical tab order in interactive elements

## Browser Support

The package supports all modern browsers that support:
- React 19+
- CSS Flexbox
- ES2015+ JavaScript features

## Troubleshooting

<AccordionGroup>
  <Accordion title="Columns are uneven in height">
    This is expected behavior with varying item heights. The shortest-column algorithm balances by item count, not actual pixel height. For exact height matching, consider using CSS Grid instead.
  </Accordion>

  <Accordion title="Breakpoints not working">
    Ensure you're passing an object with numeric keys. The component checks `window.innerWidth`, so it won't work in SSR without hydration.
  </Accordion>

  <Accordion title="Items not appearing">
    Make sure you're passing an array of valid React elements to the `children` prop. Check console for any React warnings.
  </Accordion>

  <Accordion title="Unexpected column count">
    If you see 3 columns when expecting a different number, check that you've either:
    - Passed a custom `columns` prop, or
    - Passed an empty `breakpoints={{}}` object to disable responsive behavior
  </Accordion>
</AccordionGroup>

## Related Packages

- [`@tuturuuu/ui`](/reference/packages/ui) - Complete UI component library
- [`@tuturuuu/utils`](/reference/packages/utils) - Utility functions and helpers

## Source Code

The package is open source and available on GitHub:

- [View on GitHub](https://github.com/tutur3u/platform/tree/main/packages/masonry)
- [Report Issues](https://github.com/tutur3u/platform/issues)

## Changelog

### 0.0.3 (Current)
- Fixed unbalanced column distribution using shortest-column algorithm
- Improved visual balance across all column heights

### 0.0.2
- Added build configuration for proper module distribution
- Published compiled JavaScript and TypeScript declarations

### 0.0.1
- Initial release with basic masonry layout functionality
